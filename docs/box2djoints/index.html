<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Box2D Joint Toy: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="sagedoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Box2D Joint Toy
   </div>
   <div id="projectbrief">Game Physics with a 2D Physics Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="contents">
<div class="textblock"><p><a class="anchor" id="section1"></a></p><h1>1. Introduction</h1>
<p>The Box2D Joint Toy demonstrates revolute, gear, prismatic, wheel, distance, and pulley joints. It is divided into 7 levels. This code demo has no sound.</p>
<p>The remainder of this page is divided into five sections. <a class="el" href="#section2">Section 2</a> lists the controls and their corresponding actions, <a class="el" href="#section3">Section 3</a> tells you how to build it, <a class="el" href="#section4">Section 4</a> gives you a list of actions to take in the game to see some of its important features, <a class="el" href="#section5">Section 5</a> gives a breakdown of the code, and <a class="el" href="#section6">Section 6</a> addresses the question "what next?".</p>
<p><a class="anchor" id="section2"></a></p><h1>2. Keyboard Controls</h1>
<center> <table class="doxtable">
<tr>
<td><center><b>Key</b></center> </td><td><center><b>Action</b></center> </td></tr>
<tr>
<td><center>F1</center> </td><td>Help (this document) </td></tr>
<tr>
<td><center>Backspace</center> </td><td>Reset current level </td></tr>
<tr>
<td><center>Enter</center> </td><td>Advance to next level </td></tr>
<tr>
<td><center>Space</center> </td><td>Do an interesting thing (see <a class="el" href="#section4-1">Section 4.1</a> to <a class="el" href="#section4-7">Section 4.7</a>) </td></tr>
<tr>
<td><center>PrtScr (hold down)</center> </td><td>Save screenshot to a PNG file </td></tr>
<tr>
<td><center>Esc</center> </td><td>Quit game and close the window </td></tr>
</table>
</center><p><a class="anchor" id="section3"></a></p><h1>3. Building the Game</h1>
<p>This code uses <a href="../sage/index.html">SAGE</a> and <a href="https://github.com/erincatto/Box2D">Box2D</a>. Make sure that you have followed the <a href="../install/index.html">SAGE Installation Instructions</a> and the <a href="../installphysics/index.html">Box2D Installation Instructions</a>. Navigate to the folder <span style="background-color:#D8E4D8;"><code>8. Box2D Joint Toy</code></span> in your copy of the <span style="background-color:#D8E4D8;"><code>sage-physics</code></span> repository. Run <span style="background-color:#D8E4D8;"><code>checkenv.bat</code></span> to verify that you have set the environment variables correctly. Open <span style="background-color:#D8E4D8;"><code>Box2D Joint Toy.sln</code></span> with Visual Studio and build the Release configuration. Alternatively, run <span style="background-color:#D8E4D8;"><code>Build.bat</code></span> to build both Release and Debug configurations.</p>
<p><a class="anchor" id="section4"></a></p><h1>4. Game Play</h1>
<p>This toy has 7 levels. As mentioned in <a class="el" href="#section2">Section 2</a>, the <code>Enter</code> key advances to the next level and the <code>Backspace</code> key resets the current level to the initial conditions. The levels are as follows: the windmill (<a class="el" href="#section4-1">Section 4.1</a>), round and square gears (<a class="el" href="#section4-2">Section 4.2</a>), nautilus gears (<a class="el" href="#section4-3">Section 4.3</a>), rack-and-pinion (<a class="el" href="#section4-4">Section 4.4</a>), car (<a class="el" href="#section4-5">Section 4.5</a>), Newton's cradle (<a class="el" href="#section4-6">Section 4.6</a>), and elephant drop (<a class="el" href="#section4-7">Section 4.7</a>). In every level the <code>Space</code> bar does an interesting things. These are described more detail in the subsections below.</p>
<p><a class="anchor" id="section4-1"></a></p><h2>4.1 The Windmill</h2>
<p><a class="anchor" id="fig1"></a></p><div class="image">
<img src="l1.png" alt="" width="60%"/>
<div class="caption">
Fig. 1: The windmill.</div></div>
<p>A windmill with a revolute joint connecting the vanes to the body. The revolute joint has a motor (see <a class="el" href="#fig1">Fig. 1</a>). The <code>Space</code> bar reverses the motor's direction of rotation. Notice that the vanes take a while to spin up to full speed, and when the direction of the motor is reversed they slowly spin down to zero before spinning up in the opposite direction. This is a property of motors in Box2D and will depend of the mass of the body being rotated.</p>
<p><a class="anchor" id="section4-2"></a></p><h2>4.2 Gears</h2>
<p><a class="anchor" id="fig2"></a></p><div class="image">
<img src="l2.png" alt="" width="60%"/>
<div class="caption">
Fig. 2: The gears.</div></div>
<p>A system of 9 interlocked gears constructed using revolute and gear joints (see <a class="el" href="#fig2">Fig. 2</a>). The largest gear has a motor and the others are driven by their gear joints. The <code>Space</code> bar reverses the motor's direction of rotation. Notice that the gears take a while to spin up to full speed, and when the direction of the motor is reversed they slowly spin down to zero before spinning up in the opposite direction. Notice also how the teeth of the gears appear to mesh. However, if you look closely you will see that they do not mesh exactly. This is because we are not computing the physics of the teeth, we are simply rotating the gears at the right speeds assuming that the sprites are drawn with teeth that mesh correctly. The 4 square gears mesh perfectly the same way that round gears do. They are cheating in a way - they require no extra code over and above what is necessary for ordinary round gears.</p>
<p><a class="anchor" id="section4-3"></a></p><h2>4.3 Nautilus Gears</h2>
<p><a class="anchor" id="fig3"></a></p><div class="image">
<img src="l3.png" alt="" width="60%"/>
<div class="caption">
Fig. 3: The nautilus gears.</div></div>
<p>A system of 5 <em>nautilus gears</em>, which are gears in the shape of a nautilus shell (see <a class="el" href="#fig3">Fig. 3</a>). The center gear has a revolute joint with a motor. The other gears have variable speed, so they cannot be animated by Box2D. We have to animate them ourselves which means doing a little math, which we will cover in <a class="el" href="#section5-3">Section 5.3</a>. The <code>Space</code> bar reverses the motor's direction of rotation. Notice that the gears take a while to spin up to full speed, and when the direction of the motor is reversed they slowly spin down to zero before spinning up in the opposite direction.</p>
<p><a class="anchor" id="section4-4"></a></p><h2>4.4 Rack-and-Pinion</h2>
<p><a class="anchor" id="fig4"></a></p><div class="image">
<img src="l4.png" alt="" width="60%"/>
<div class="caption">
Fig. 4: The rack-and-pinion.</div></div>
<p>A <em>rack-and-pinion</em> consists of a round gear called a <em>pinion</em> connected to a toothed rod called a <em>rack</em> (see <a class="el" href="#fig4">Fig. 4</a>). When the pinion rotates, the rack moves horizontally. The pinion has a revolute joint with a motor. The rack is connected to the pinion using a gear joint and a prismatic joint. The <code>Space</code> bar reverses the motor's direction of rotation. Notice that the pinion takes a while to spin up to full speed, and when the direction of the motor is reversed it slowly spins down to zero before spinning up in the opposite direction. Also notice the sudden stop when the pinion reaches its extreme left and right positions.</p>
<p><a class="anchor" id="section4-5"></a></p><h2>4.5 Car</h2>
<p><a class="anchor" id="fig5"></a></p><div class="image">
<img src="l5.png" alt="" width="60%"/>
<div class="caption">
Fig. 5: The car.</div></div>
<p>A car drives autonomously back and forth over a pair of ramps (see <a class="el" href="#fig5">Fig. 5</a>). The car is constructed using a pair of wheel joints that have motors. The <code>Space</code> bar reverses the motors' directions of rotation. Notice that the car takes a while to get to full speed, and when the direction of the motors is reversed it slows down to zero before speeding up in the opposite direction. Also notice the suspension that makes the car bounce when it goes over the ramps. If you are fast with the <code>Space</code> bar you may be able to get the car stuck. If you do, reset it with the <code>Backspace</code> key.</p>
<p><a class="anchor" id="section4-6"></a></p><h2>4.6 Newton's Cradle</h2>
<p><a class="anchor" id="fig6"></a></p><div class="image">
<img src="l6.png" alt="" width="60%"/>
<div class="caption">
Fig. 6: Newton's cradle.</div></div>
<p>Distance joints are used to construct a 2D <a href="../newton/index.html">Newton's Cradle</a> with 6 balls (see <a class="el" href="#fig6">Fig. 6</a>). When the balls are stopped, hitting the <code>Space</code> bar will lift and release from 1 to 5 balls in sequence. After that it should behave like a real Newton's Cradle. <a class="el" href="#fig7">Fig. 7</a> shows a screen shot with one ball raised (left), and the result after the collision (right). <a class="el" href="#fig8">Fig. 8</a> shows a screen shot with two balls raised (left), and the result after the collision (right). When the balls are in motion, the <code>Space</code> bar stops them.</p>
<p><a class="anchor" id="fig7"></a></p><div class="image">
<img src="newton1.png" alt="" width="80%"/>
<div class="caption">
Fig. 7: Newton's cradle with 1 ball raised (left) and after collision (right).</div></div>
<p><a class="anchor" id="fig8"></a></p><div class="image">
<img src="newton2.png" alt="" width="80%"/>
<div class="caption">
Fig. 8: Newton's cradle with 2 balls raised (left) and after collision (right).</div></div>
<p><a class="anchor" id="section4-7"></a></p><h2>4.7 Elephant Drop</h2>
<p><a class="anchor" id="fig9"></a></p><div class="image">
<img src="l7.png" alt="" width="80%"/>
<div class="caption">
Fig. 9: The elephant drop before (left) and after (right) the elephant is dropped.</div></div>
<p>A pulley joint is used to lift a safe when an elephant is dropped into a wooden cradle (see <a class="el" href="#fig9">Fig. 9</a>). The pulley wheels and ropes are animated in code. When the elephant is not present, the <code>Space</code> bar makes it drop in from above. When the elephant is present, the <code>Space</code> bar makes it disappear. You can make the elephant appear and disappear at any point in the cradle's travel, not just when it is at the top or bottom. Notice that in <a class="el" href="#fig9">Fig. 9</a> (right) the cradle is not immediately below the left rim of the pulley wheel above so that the rope from the pulley to the cradle is not vertical, whereas that portion of the rope is perfectly vertical in <a class="el" href="#fig9">Fig. 9</a> (left). This is because the elephant is not dropped exactly above the center of the cradle, causing it to rock from side to side as it falls.</p>
<p><a class="anchor" id="section5"></a></p><h1>5. Code Breakdown</h1>
<p>The most interesting portions of the code for each of the levels is described in the following subsections: the windmill (<a class="el" href="#section5-1">Section 5.1</a>), round and square gears (<a class="el" href="#section5-2">Section 5.2</a>), nautilus gears (<a class="el" href="#section5-3">Section 5.3</a>), rack-and-pinion (<a class="el" href="#section5-4">Section 5.4</a>), car (<a class="el" href="#section5-5">Section 5.5</a>), and Newton's cradle (<a class="el" href="#section5-6">Section 5.6</a>), elephant drop (<a class="el" href="#section5-7">Section 5.7</a>).</p>
<p><a class="anchor" id="section5-1"></a></p><h2>5.1 The Windmill</h2>
<p>UNDER CONSTRUCTION</p>
<p><a class="anchor" id="section5-2"></a></p><h2>5.2 Gears</h2>
<p>UNDER CONSTRUCTION</p>
<p><a class="anchor" id="section5-3"></a></p><h2>5.3 Nautilus Gears</h2>
<p><a class="anchor" id="fig5-3-1"></a></p><div class="image">
<img src="Nautilus2-342-96.gif" alt="" width="25%"/>
<div class="caption">
Fig. 5.3.1: The nautilus gears.</div></div>
<p>UNDER CONSTRUCTION</p>
<p><a class="anchor" id="section5-4"></a></p><h2>5.4 Rack-and-Pinion</h2>
<p>UNDER CONSTRUCTION</p>
<p><a class="anchor" id="fig5-4-1"></a></p><div class="image">
<img src="rackandpinion.gif" alt="" width="50%"/>
<div class="caption">
Fig. 5.4.1: The rack-and-pinion.</div></div>
<p><a class="anchor" id="section5-5"></a></p><h2>5.5 Car</h2>
<p>UNDER CONSTRUCTION</p>
<p><a class="anchor" id="section5-6"></a></p><h2>5.6 Newton's Cradle</h2>
<p>UNDER CONSTRUCTION</p>
<p><a class="anchor" id="section5-7"></a></p><h2>5.7 Elephant Drop</h2>
<p>UNDER CONSTRUCTION</p>
<p><a class="anchor" id="section6"></a></p><h1>6. What Next?</h1>
<p>Next, take a look at the <a href="../cannon/index.html">Box2D Cannon Game</a>. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
