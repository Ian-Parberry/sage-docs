<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The Pinball Game: CGate Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">The Pinball Game
   </div>
   <div id="projectbrief">Game Physics with Bespoke Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_c_gate-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">CGate Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A gate.  
 <a href="class_c_gate.html#details">More...</a></p>

<p><code>#include &lt;Parts.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CGate:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_c_gate.png" usemap="#CGate_map" alt=""/>
  <map id="CGate_map" name="CGate_map">
<area href="class_c_common.html" title="The common variables class." alt="CCommon" shape="rect" coords="163,56,316,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a42bfa6ca6ef5ac9458be757b8b6b15da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_gate.html#a42bfa6ca6ef5ac9458be757b8b6b15da">CGate</a> (Shapes::CLineSeg *p)</td></tr>
<tr class="memdesc:a42bfa6ca6ef5ac9458be757b8b6b15da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:a42bfa6ca6ef5ac9458be757b8b6b15da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12f272b8adc942a544df878f2dd68ce"><td class="memItemLeft" align="right" valign="top"><a id="ae12f272b8adc942a544df878f2dd68ce" name="ae12f272b8adc942a544df878f2dd68ce"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~CGate</b> ()</td></tr>
<tr class="memdesc:ae12f272b8adc942a544df878f2dd68ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:ae12f272b8adc942a544df878f2dd68ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c5bc1cb4ef685b4ad1bf09525f1e15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_gate.html#af9c5bc1cb4ef685b4ad1bf09525f1e15">CloseGate</a> ()</td></tr>
<tr class="memdesc:af9c5bc1cb4ef685b4ad1bf09525f1e15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check latch to see if gate should be closed.  <br /></td></tr>
<tr class="separator:af9c5bc1cb4ef685b4ad1bf09525f1e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac58a5ceb4cb14d4fa6be61c914cec859"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_gate.html#ac58a5ceb4cb14d4fa6be61c914cec859">NarrowPhase</a> (Shapes::CDynamicCircle *)</td></tr>
<tr class="memdesc:ac58a5ceb4cb14d4fa6be61c914cec859"><td class="mdescLeft">&#160;</td><td class="mdescRight">Narrow phase collision detection and response.  <br /></td></tr>
<tr class="separator:ac58a5ceb4cb14d4fa6be61c914cec859"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae314d128e24130badf5fb7fb13399f2f"><td class="memItemLeft" align="right" valign="top"><a id="ae314d128e24130badf5fb7fb13399f2f" name="ae314d128e24130badf5fb7fb13399f2f"></a>
Shapes::CLineSeg *&#160;</td><td class="memItemRight" valign="bottom"><b>m_pLineSeg</b> = nullptr</td></tr>
<tr class="memdesc:ae314d128e24130badf5fb7fb13399f2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to line segment representing gate. <br /></td></tr>
<tr class="separator:ae314d128e24130badf5fb7fb13399f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab18dcf6ec6935fa0514a5a78b41a4505"><td class="memItemLeft" align="right" valign="top"><a id="ab18dcf6ec6935fa0514a5a78b41a4505" name="ab18dcf6ec6935fa0514a5a78b41a4505"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_bOpen</b> = false</td></tr>
<tr class="memdesc:ab18dcf6ec6935fa0514a5a78b41a4505"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if gate is open. <br /></td></tr>
<tr class="separator:ab18dcf6ec6935fa0514a5a78b41a4505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f68bc7535848891da21868f58ce3cc"><td class="memItemLeft" align="right" valign="top"><a id="a79f68bc7535848891da21868f58ce3cc" name="a79f68bc7535848891da21868f58ce3cc"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_bOccupied</b> = false</td></tr>
<tr class="memdesc:a79f68bc7535848891da21868f58ce3cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if ball is holding gate open. <br /></td></tr>
<tr class="separator:a79f68bc7535848891da21868f58ce3cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_static_attribs_class_c_common"><td colspan="2" onclick="javascript:toggleInherit('pro_static_attribs_class_c_common')"><img src="closed.png" alt="-"/>&#160;Static Protected Attributes inherited from <a class="el" href="class_c_common.html">CCommon</a></td></tr>
<tr class="memitem:affe2697f28fbe937757db5eaa94c00d3 inherit pro_static_attribs_class_c_common"><td class="memItemLeft" align="right" valign="top">
static Sage::CSpriteRenderer *&#160;</td><td class="memItemRight" valign="bottom"><b>m_pRenderer</b> = nullptr</td></tr>
<tr class="memdesc:affe2697f28fbe937757db5eaa94c00d3 inherit pro_static_attribs_class_c_common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the renderer. <br /></td></tr>
<tr class="separator:affe2697f28fbe937757db5eaa94c00d3 inherit pro_static_attribs_class_c_common"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ecfc2b5378ac9cc103605dca52011b3 inherit pro_static_attribs_class_c_common"><td class="memItemLeft" align="right" valign="top">
static <a class="el" href="class_c_object_manager.html">CObjectManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>m_pObjectManager</b> = nullptr</td></tr>
<tr class="memdesc:a2ecfc2b5378ac9cc103605dca52011b3 inherit pro_static_attribs_class_c_common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the object manager. <br /></td></tr>
<tr class="separator:a2ecfc2b5378ac9cc103605dca52011b3 inherit pro_static_attribs_class_c_common"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48deca1b01b176202d98e3e73bd39a28 inherit pro_static_attribs_class_c_common"><td class="memItemLeft" align="right" valign="top">
static UINT&#160;</td><td class="memItemRight" valign="bottom"><b>m_nMIterations</b> = 4</td></tr>
<tr class="memdesc:a48deca1b01b176202d98e3e73bd39a28 inherit pro_static_attribs_class_c_common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of motion iterations. <br /></td></tr>
<tr class="separator:a48deca1b01b176202d98e3e73bd39a28 inherit pro_static_attribs_class_c_common"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96ee6607f3899e75245d6847d49ca8f3 inherit pro_static_attribs_class_c_common"><td class="memItemLeft" align="right" valign="top">
static UINT&#160;</td><td class="memItemRight" valign="bottom"><b>m_nCIterations</b> = 1</td></tr>
<tr class="memdesc:a96ee6607f3899e75245d6847d49ca8f3 inherit pro_static_attribs_class_c_common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of collision iterations. <br /></td></tr>
<tr class="separator:a96ee6607f3899e75245d6847d49ca8f3 inherit pro_static_attribs_class_c_common"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a630f382e032447df8f0757c0a20cf inherit pro_static_attribs_class_c_common"><td class="memItemLeft" align="right" valign="top">
static float&#160;</td><td class="memItemRight" valign="bottom"><b>m_fFrequency</b> = 60.0f*<a class="el" href="class_c_common.html#a48deca1b01b176202d98e3e73bd39a28">m_nMIterations</a></td></tr>
<tr class="memdesc:a55a630f382e032447df8f0757c0a20cf inherit pro_static_attribs_class_c_common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frequency, number of physics iterations per second. <br /></td></tr>
<tr class="separator:a55a630f382e032447df8f0757c0a20cf inherit pro_static_attribs_class_c_common"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342e9d67f45b482a02d16b595508850e inherit pro_static_attribs_class_c_common"><td class="memItemLeft" align="right" valign="top">
static <a class="el" href="_game_defines_8h.html#a9eee2982f33e8c95b34d3acfbc807c77">eDrawMode</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_eDrawMode</b> = eDrawMode::Background</td></tr>
<tr class="memdesc:a342e9d67f45b482a02d16b595508850e inherit pro_static_attribs_class_c_common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draw mode. <br /></td></tr>
<tr class="separator:a342e9d67f45b482a02d16b595508850e inherit pro_static_attribs_class_c_common"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a5b305a14d67cf4bfba3113f0f744f0 inherit pro_static_attribs_class_c_common"><td class="memItemLeft" align="right" valign="top">
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_bBallInPlay</b> = false</td></tr>
<tr class="memdesc:a4a5b305a14d67cf4bfba3113f0f744f0 inherit pro_static_attribs_class_c_common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is there a ball currently in play? <br /></td></tr>
<tr class="separator:a4a5b305a14d67cf4bfba3113f0f744f0 inherit pro_static_attribs_class_c_common"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a895fca9c2d0bec1d4696fb807973b540 inherit pro_static_attribs_class_c_common"><td class="memItemLeft" align="right" valign="top">
static UINT&#160;</td><td class="memItemRight" valign="bottom"><b>m_nScore</b> = 0</td></tr>
<tr class="memdesc:a895fca9c2d0bec1d4696fb807973b540 inherit pro_static_attribs_class_c_common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current score. <br /></td></tr>
<tr class="separator:a895fca9c2d0bec1d4696fb807973b540 inherit pro_static_attribs_class_c_common"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A gate allows balls to cross in one direction only. It's essentially a line segment with a couple of Boolean variables and some code that handles the crossing-in-one-direction requirement. Care must be taken to do the right thing when a ball gets nudged back while in the process of crossing.</p>
<p>A gate can be open or closed, latched or unlatched. When it is open, there can be no collisions. When it is closed, balls collide with it if they are travelling from one side but not the other. More specifically, if the vector from the ball's center to the POI is in the opposite direction to the line segment's normal vector <code>CLineSeg::m_vNormal</code> then they can cross. Recall that the direction of <code>CLineSeg::m_vNormal</code> depends on the order in which <code>CLineSeg</code>'s end points were specified, so make sure you get it right. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a42bfa6ca6ef5ac9458be757b8b6b15da" name="a42bfa6ca6ef5ac9458be757b8b6b15da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42bfa6ca6ef5ac9458be757b8b6b15da">&#9670;&#160;</a></span>CGate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CGate::CGate </td>
          <td>(</td>
          <td class="paramtype">Shapes::CLineSeg *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a closed and unlatched gate from a line segment. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Pointer to a line segment. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af9c5bc1cb4ef685b4ad1bf09525f1e15" name="af9c5bc1cb4ef685b4ad1bf09525f1e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9c5bc1cb4ef685b4ad1bf09525f1e15">&#9670;&#160;</a></span>CloseGate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CGate::CloseGate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close gate if open and there is no ball currently holding it open. Unset the occupied flag ready for use the the next frame. We assume that this is called at the end of the frame. </p>

</div>
</div>
<a id="ac58a5ceb4cb14d4fa6be61c914cec859" name="ac58a5ceb4cb14d4fa6be61c914cec859"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac58a5ceb4cb14d4fa6be61c914cec859">&#9670;&#160;</a></span>NarrowPhase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CGate::NarrowPhase </td>
          <td>(</td>
          <td class="paramtype">Shapes::CDynamicCircle *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If a dynamic circle collides with a gate and it is moving in the correct direction, then the gate opens and the dynamic circle is allowed through. Otherwise the dynamic circle bounces off the gate as usual. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Pointer to a dynamic circle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the dynamic circle bounces off the gate. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
