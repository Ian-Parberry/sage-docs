<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SAGE Installation Guide: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="sagedoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="doxylogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">SAGE Installation Guide
   </div>
   <div id="projectbrief">A Simple Academic Game Engine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="contents">
<div class="textblock"><p><a class="anchor" id="preamble"></a> Before we begin, make sure that you are on a PC running Windows 11 and that your account has the authority to install new programs and to create and edit Windows environment variables. This may not be the case if you are on a work or school computer. If you are unfamiliar with environment variables, you can create and edit them by hitting the Window key on your keyboard and typing "Environment". Click on <code>Edit the system environment variables</code>. The <code>Environment Variables</code> dialog box should appear. Click on the <code>New</code> or <code>Edit</code> button and fill in the name and value fields.</p>
<p>The remainder of this page is divided into six sections. <a class="el" href="index.html#visualstudio">Section 1</a> explains how to download and install Visual Studio, <a class="el" href="index.html#msbuild">Section 2</a> shows how to add MSBuild to your <code>PATH</code> environment variable, <a class="el" href="index.html#directxtk12">Section 3</a> explains how to download and install the DirectX12 Toolkit, <a class="el" href="index.html#sage">Section 4</a> shows how to build SAGE, <a class="el" href="index.html#vld">Section 5</a> explains how to install Visual Leak Detector, and <a class="el" href="index.html#summary">Section 6</a> contains a summary to help you check your progress.</p>
<p><a class="anchor" id="visualstudio"></a></p><h1>1. Microsoft Visual Studio</h1>
<p>If your computer already has Microsoft Visual Studio installed, check that it has the following three workloads as shown in <a class="el" href="index.html#fig1">Fig. 1</a>: Desktop development with C++, Game development with C++, and .NET desktop development. If not, you can install them from within Visual Studio without having to deinstall and reinstall the whole thing. You can get a copy of Visual Studio Community from <a href="https://visualstudio.microsoft.com/vs/community/">https://visualstudio.microsoft.com/vs/community/</a>. Make sure that you choose the workloads mentioned above.</p>
<p><a class="anchor" id="fig1"></a></p><div class="image">
<img src="vsconfig.png" alt="" width="95%"/>
<div class="caption">
Fig 1. Visual Studio Workloads.</div></div>
<p><a class="anchor" id="msbuild"></a></p><h1>2. MSBuild</h1>
<p>In order to use the included batch files <code>Build.bat</code> for fast compilation without running Visual Studio, you must add the location of <code>MSBuild.exe</code>, which was installed when you installed Visual Studio, to your <code>Path</code> environment variable. Its location will depend on which version of Visual Studio you are running. For example, the location for Visual Studio 2022 Community is </p><pre class="fragment">C:\Program Files\Microsoft Visual Studio\2022\Community\MSBuild\Current\Bin
</pre><p>If you are unfamiliar with the process of modifying or creating an environment variable, begin by hitting the Window key on your keyboard and typing "Environment". Click on <code>Edit the system environment variables</code>. The <code>Environment Variables</code> dialog box should appear. Click on the <code>New</code> or <code>Edit</code> button and fill in the name and value fields.</p>
<p><b>Important Note</b>: Visual Studio only reads the contents of environment variables on startup, so make your you quit all instances of Visual Studio and restart them after creating or changing any environment variable.</p>
<p><a class="anchor" id="directxtk12"></a></p><h1>3. DirectXTK12</h1>
<p>Before compiling SAGE you must install and compile the DirectX12 Toolkit. Clone or download the source code for the DirectX12 Toolkit from <a href="https://github.com/Microsoft/DirectXTK12/">https://github.com/Microsoft/DirectXTK12/</a>. Open <code>DirectXTK_Desktop_2022_Win10.sln</code> in Visual Studio and compile in both <code>Release</code> and <code>Debug</code> configurations with 64-bit platform (<code>x64</code>) selected. We use <code>x64</code> because data that is to be uploaded to the GPU needs to be 16-byte aligned, which happens automatically with 64-bit code but not with 32-bit code. Technically it is possible to modify SAGE to work on a 32-bit platform, but that involves overriding the <code>new</code> operator in the renderer and life's just too short to get into that.</p>
<p>Next, create a Windows environment variable <code>DIRECTXTK12_DIR</code> and set it to the name of the folder in which you installed DirectXTK 12. On my computer this is <code>C:\Users\ian\Documents\GitHub\DXTK12\</code>. Then create a Windows environment variable <code>DIRECTXTK12LIB_DIR</code> and set it to the name of the library folder for DirectXTK 12. On my computer this is <code>C:\Users\ian\Documents\GitHub\DXTK12\Bin\Desktop_2019_Win10\</code>. Make sure that both paths ends in a backslash character.</p>
<p><a class="anchor" id="sage"></a></p><h1>4. SAGE</h1>
<p>Clone or download the source code for SAGE from <a href="https://github.com/Ian-Parberry/sage/">https://github.com/Ian-Parberry/sage/</a>. Navigate to the topmost folder in your copy of the <code>sage</code> repository. To check that you have done it right so far, you will find a batch files <code>testenv.bat</code> in the folder with <code>Sage.sln</code>. Double-click on it to run. If all goes well, you will see the message "0 errors found".</p>
<p>Open <code>Sage.sln</code> in Visual Studio and compile in both <code>Release</code> and <code>Debug</code> configurations with 64-bit platform (<code>x64</code>) selected. As part of the build process, this will create a Windows environment variable <code>SAGE_DIR</code> and set it to the current folder. This will be used in all SAGE games to tell Visual Studio where to find SAGE header and library files. Alternately, running <code>Build.bat</code> will compile in both Release and Debug configurations and set the <code>SAGE_DIR</code> environment variable. Note, however, that it simply reports success or failure for each configuration. There are no warning or error messages. If a build fails, run <code>testenv.bat</code> and try building in Visual Studio instead.</p>
<p><a class="anchor" id="vld"></a></p><h1>5. Visual Leak Detector</h1>
<p>We strongly recommend that you install Visual Leak Detector from <a href="https://kinddragon.github.io/vld/">https://kinddragon.github.io/vld/</a>. Click on <code>Releases</code> and run the latest installer. You will need to set an environment variable <code>VLD_DIR</code> that SAGE will use to find the header and library folders for Visual Leak Detector. The default is <code>C:\Program Files (x86)\Visual Leak Detector</code> (unless you opted to install it in a different location). Visual Leak Detector detects memory leaks but only works when your game is compiled in <code>Debug</code> mode.</p>
<p>Alternately, if you don't want Visual Leak Detector to detect memory leaks, simply comment out the line <code>#include &lt;vld.h&gt;</code> from the file <code>Main.cpp</code> in any SAGE games.</p>
<p><a class="anchor" id="summary"></a></p><h1>6. Summary</h1>
<p>Before moving on, make sure that you have done the following.</p>
<ol type="1">
<li>Install Visual Studio with Desktop development with C++, Game development with C++, and .NET desktop development. See <a class="el" href="index.html#visualstudio">Section 1</a>.</li>
<li>Find the folder for <code>MSBuild.exe</code> and add it to your <code>PATH</code> environment variable. This will let you run the batch files <code>Build.bat</code> as a fast alternative to running Visual Studio. See <a class="el" href="index.html#msbuild">Section 2</a>.</li>
<li>Clone or download DirectXTK12 from <a href="https://github.com/Microsoft/DirectXTK12/">GitHub</a>. Build it in both Release and Debug configurations. Set the environment variables <code>DIRECTXTK12_DIR</code> and <code>DIRECTXTK12LIB_DIR</code>. See <a class="el" href="index.html#directxtk12">Section 3</a>.</li>
<li>Build SAGE in both Release and Debug configurations. The best way to do this is to run <code>Build.bat</code> in the topmost folder in your copy of the <code>sage</code> repository. If this reports failure, run <code>checkenv.bat</code> to make sure that you set the DIRECTXTK12 environment variables correctly. See <a class="el" href="index.html#sage">Section 4</a>.</li>
<li>Install <a href="https://kinddragon.github.io/vld/">Visual Leak Detector</a>. Build it in Debug configuration. Set the environment variable <code>VLD_DIR</code>. See <a class="el" href="index.html#vld">Section 5</a>. </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
